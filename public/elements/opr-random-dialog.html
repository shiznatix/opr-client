<dom-module id="opr-random-dialog">
	<template>
		<style include="opr-shared-styles"></style>

		<paper-dialog
			entry-animation="scale-up-animation"
			exit-animation="fade-out-animation"
			id="randomDialog">

			<h2>Random</h2>

			<paper-radio-group selected="{{amount}}" attr-for-selected="value">
				<paper-radio-button value="1">1</paper-radio-button>
				<br />
				<paper-radio-button value="2">2</paper-radio-button>
				<br />
				<paper-radio-button value="3">3</paper-radio-button>
				<br />
				<paper-radio-button value="5">5</paper-radio-button>
				<br />
				<paper-radio-button value="10">10</paper-radio-button>
				<br />
			</paper-radio-group>

			<div class="dialogButtons">
				<paper-button dialog-dismiss>Cancel</paper-button>
				<paper-button dialog-confirm on-tap="enqueuePressed">Enqueue</paper-button>
				<paper-button dialog-confirm on-tap="playPressed">Play</paper-button>
			</div>
		</paper-dialog>
	</template>
	<script>
		Polymer({
			is: 'opr-random-dialog',

			randomCallback: null,

			properties: {
				amount: {
					type: Number,
					value: 5,
				},
			},

			open: function(randomCallback) {
				this.randomCallback = randomCallback;
				this.$.randomDialog.open();
			},

			getSavedShowNames: function() {
				let savedShowNames = [];

				try {
					savedShowNames = JSON.parse(localStorage.getItem('randomShows'));
				} catch (e) {
				}

				return (Array.isArray(savedShowNames) ? savedShowNames : []);
			},

			enqueuePressed: function() {
				this.randomCallback('enqueue', this.amount, this.getSavedShowNames());
			},

			playPressed: function() {
				this.randomCallback('play', this.amount, this.getSavedShowNames());
			},
		});
	</script>
</dom-module>