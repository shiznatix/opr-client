<link rel="import" href="/elements/opr-elements.html">

<dom-module id="opr-app">
	<template>
		<style include="opr-shared-styles">
			paper-scroll-header-panel {
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				background-color: var(--paper-blue-grey-900);
			}

			paper-toolbar {
				color: var(--paper-blue-200);
				background-color: var(--paper-blue-900);
			}

			iron-icon {
				--iron-icon-fill-color: var(--paper-blue-900);
				--iron-icon-stroke-color: var(--paper-blue-200);
				margin-right: 1vw;
			}

			#toolbarTitle {
				font-size: 5vw;
				flex-grow: 1;
			}

			/*paper-menu {
				--paper-menu-background-color: var(--paper-blue-grey-900);
				--paper-menu-color: var(--paper-blue-grey-400);
			}
			paper-item {
				font-size: 4vw;
			}*/
			paper-menu-button {
				--paper-menu-button-dropdown: {
					max-width: 100%;
				};
			}
			paper-item {
				--paper-item: {
					white-space: nowrap;
					width: 100%;
				};
			}

			iron-pages {
				height: 100%;
			}
		</style>

		<iron-location path="{{path}}"></iron-location>

		<paper-scroll-header-panel fixed>
			<paper-toolbar id="toolbar">
				<iron-icon icon="arrow-back" id="backIcon" on-tap="backIconTapped"></iron-icon>
				<iron-icon icon="weekend" id="appIcon" on-tap="appIconTapped"></iron-icon>
				<h1 id="toolbarTitle">OMX Remote</h1>

				<paper-menu-button>
					<paper-icon-button icon="menu" class="dropdown-trigger" alt="menu"></paper-icon-button>
					<paper-menu class="dropdown-content">
						<paper-item on-tap="randomSettingsTapped" class="text">Random settings</paper-item>
					</paper-menu>
				</paper-menu-button>
			</paper-toolbar>

			<iron-pages
				selected="[[path]]"
				attr-for-selected="name"
				role="main">

				<opr-remote name="/"></opr-remote>
				<opr-random-settings name="/random-settings"></opr-random-settings>
				<opr-browse name="/browse"></opr-browse>
			</iron-pages>
		</paper-scroll-header-panel>
	</template>
	<script>
		Polymer({
			is: 'opr-app',

			properties: {
				path: {
					type: String,
					observer: 'pathChanged',
				},
			},

			pathChanged: function() {
				if ('/' === this.path) {
					this.$.appIcon.hidden = false;
					this.$.backIcon.hidden = true;
				} else {
					this.$.appIcon.hidden = true;
					this.$.backIcon.hidden = false;
				}
			},

			backIconTapped: function() {
				window.history.back();
			},

			appIconTapped: function() {},

			randomSettingsTapped: function() {
				this.path = '/random-settings';
			},
		});
	</script>
</dom-module>